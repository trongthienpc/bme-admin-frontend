{"ast":null,"code":"import setAuthToken from \"../utils/setAuthToken\";\nimport { LOAD_USER, LOCAL_STORAGE_TOKEN_NAME, LOGIN, apiUrl, ADD_ROOM_STYLE } from \"./constant\";\nimport axios from \"axios\";\nconst initState = {\n  user: null,\n  isAuthenticated: false,\n  loginStatus: false,\n  loginMessage: \"\",\n  addMessage: '',\n  roomStyles: [],\n  roomStyle: {}\n};\nconst roomStyleState = {\n  roomStyles: [],\n  roomStyle: {}\n};\n\nfunction Reducer(state, action) {\n  switch (action.type) {\n    case ADD_ROOM_STYLE:\n      const formData = new FormData();\n      formData.append('name', action.payload.name);\n      formData.append('description', action.payload.description);\n      formData.append('max', action.payload.max);\n      formData.append('bed', action.payload.bed);\n      formData.append('image', action.payload.image);\n      const response = axios.post(`${apiUrl}/roomStyle/add`, formData);\n\n      if (response.data.success) {}\n\n      return { ...state,\n        roomStyles: [...state.roomStyles, action.payload]\n      };\n\n    case LOAD_USER:\n      const loadUser = async () => {\n        if (localStorage[LOCAL_STORAGE_TOKEN_NAME]) setAuthToken(localStorage[LOCAL_STORAGE_TOKEN_NAME]);\n\n        try {\n          const response = await axios.get(`${apiUrl}/auth`);\n\n          if (response.data.success) {\n            return { ...state,\n              isAuthenticated: true,\n              user: response.data.user\n            };\n          }\n        } catch (error) {\n          localStorage.removeItem(LOCAL_STORAGE_TOKEN_NAME);\n          setAuthToken(null);\n          return { ...state,\n            isAuthenticated: false,\n            user: null\n          };\n        }\n      };\n\n      loadUser();\n      break;\n\n    case LOGIN:\n      return { ...state,\n        isAuthenticated: true,\n        loginMessage: action.payload.message,\n        loginStatus: action.payload.status\n      };\n\n    default:\n      break;\n  }\n}\n\n_c = Reducer;\nexport { initState, roomStyleState };\nexport default Reducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reducer\");","map":{"version":3,"sources":["D:/bme/admin/frontend/src/context/Reducer.js"],"names":["setAuthToken","LOAD_USER","LOCAL_STORAGE_TOKEN_NAME","LOGIN","apiUrl","ADD_ROOM_STYLE","axios","initState","user","isAuthenticated","loginStatus","loginMessage","addMessage","roomStyles","roomStyle","roomStyleState","Reducer","state","action","type","formData","FormData","append","payload","name","description","max","bed","image","response","post","data","success","loadUser","localStorage","get","error","removeItem","message","status"],"mappings":"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","sourcesContent":["import setAuthToken from \"../utils/setAuthToken\";\r\nimport {\r\n  LOAD_USER,\r\n  LOCAL_STORAGE_TOKEN_NAME,\r\n  LOGIN,\r\n  apiUrl,\r\n  ADD_ROOM_STYLE,\r\n} from \"./constant\";\r\nimport axios from \"axios\";\r\nconst initState = {\r\n  user: null,\r\n  isAuthenticated: false,\r\n  loginStatus: false,\r\n  loginMessage: \"\",\r\n  addMessage: '',\r\n  roomStyles: [],\r\n  roomStyle: {},\r\n};\r\n\r\nconst roomStyleState = {\r\n  roomStyles: [],\r\n  roomStyle: {},\r\n};\r\n\r\nfunction Reducer(state, action) {\r\n  switch (action.type) {\r\n    case ADD_ROOM_STYLE:\r\n\r\n      const formData = new FormData();\r\n      formData.append('name', action.payload.name)\r\n      formData.append('description', action.payload.description)\r\n      formData.append('max', action.payload.max)\r\n      formData.append('bed', action.payload.bed)\r\n      formData.append('image', action.payload.image)\r\n      const response = axios.post(`${apiUrl}/roomStyle/add`, formData)\r\n\r\n      if (response.data.success) {\r\n\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        roomStyles: [...state.roomStyles, action.payload],\r\n      };\r\n\r\n    case LOAD_USER:\r\n      const loadUser = async () => {\r\n        if (localStorage[LOCAL_STORAGE_TOKEN_NAME])\r\n          setAuthToken(localStorage[LOCAL_STORAGE_TOKEN_NAME]);\r\n        try {\r\n          const response = await axios.get(`${apiUrl}/auth`);\r\n          if (response.data.success) {\r\n            return {\r\n              ...state,\r\n              isAuthenticated: true,\r\n              user: response.data.user,\r\n            };\r\n          }\r\n        } catch (error) {\r\n          localStorage.removeItem(LOCAL_STORAGE_TOKEN_NAME);\r\n          setAuthToken(null);\r\n          return {\r\n            ...state,\r\n            isAuthenticated: false,\r\n            user: null,\r\n          };\r\n        }\r\n      };\r\n      loadUser();\r\n      break;\r\n    case LOGIN:\r\n      return {\r\n        ...state,\r\n        isAuthenticated: true,\r\n        loginMessage: action.payload.message,\r\n        loginStatus: action.payload.status,\r\n      };\r\n\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nexport { initState, roomStyleState };\r\nexport default Reducer;\r\n"]},"metadata":{},"sourceType":"module"}